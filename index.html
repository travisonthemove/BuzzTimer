<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BuzzTimer - Track your buzz like a pro</title>

  <!-- Popper.js (required by Tippy) -->
  <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
  <!-- Tippy.js (the main library) -->
  <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.min.js"></script>

  <!-- Add Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <main id="main">
  <h1>BuzzTimer - Track your buzz like a pro</h1>
  <div id="appAlerts" class="status-message" aria-live="polite"></div>
  <div class="app-container">
    <img src="static/icons/logo.svg" alt="BuzzTimer Logo" 
         style="width: 60px; height: 60px; margin: 0 auto; display: block;">
    <h1>BuzzTimer</h1>
    <p class="tagline">Elevate your journey</p>
    <p>
      Whether fine-tuning your mindfulness practice or exploring the effects of different strains, 
      BuzzTimer gives you the tools to log your progress, track your insights, and elevate your 
      cannabis journey with purpose.
    </p>

    <!-- Active Theme Display-->
    <p id="activeThemeText">Active Theme: (none)</p>

    <!-- Theme Container -->
    <div class="theme-container">

      <!-- Display Group in Upper Right -->
      <div class="display-group">
        <!-- Dark/Light Mode Toggle -->
        <button id="darkModeToggle"
                type="button"
                aria-label="Switch to light mode"
                data-action="toggle-dark-mode"
                data-mode="dark"
                data-tippy-content="Switch between light mode and dark mode.">
          <svg class="icon icon-moon" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M21 12.79A9 9 0 0111.21 3 7 7 0 0012 17a7 7 0 009-4.21z" fill="currentColor" />
          </svg>
          <svg class="icon icon-sun" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <circle cx="12" cy="12" r="5" fill="currentColor" />
            <path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.07-7.07l-1.41 1.41M8.34 17.66 6.93 19.07m0-14.14 1.41 1.41m9.32 9.32 1.41 1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
          </svg>
        </button>

        <!-- Theme Toggle Button -->
        <button id="themeToggle" aria-controls="skinSelector" aria-expanded="false"
                type="button"
                class="themeToggle"
                aria-label="Themes"
                data-action="toggle-theme-panel"
                data-tippy-content="Open or close the Theme Selector.">
          <svg class="icon icon-palette" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M12 3a9 9 0 00-9 9c0 4.97 4.03 9 9 9h.5a2.5 2.5 0 002.5-2.5 2.5 2.5 0 00-2.5-2.5h-1a2 2 0 110-4h4a3 3 0 003-3 6 6 0 00-6-6zm-4.5 9a1.5 1.5 0 111.5-1.5A1.5 1.5 0 017.5 12zm3-3a1.5 1.5 0 111.5-1.5A1.5 1.5 0 0110.5 9zm5 0a1.5 1.5 0 111.5-1.5A1.5 1.5 0 0115.5 9zm2 3a1.5 1.5 0 111.5-1.5A1.5 1.5 0 0117.5 12z" fill="currentColor" />
          </svg>
        </button>

        <!-- Settings (new button) -->
        <button id="settingsBtn"
                type="button"
                aria-label="Settings"
                data-action="open-settings"
                data-tippy-content="ToDo: Open Settings.">
          <svg class="icon icon-gear" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M19.14 12.94a7.2 7.2 0 000-1.88l2.03-1.58-1.5-2.6-2.39.78a6.1 6.1 0 00-1.62-.94L15.5 3h-3l-.16 2.72a6.1 6.1 0 00-1.62.94l-2.39-.78-1.5 2.6 2.03 1.58a6.1 6.1 0 000 1.88l-2.03 1.58 1.5 2.6 2.39-.78a6.1 6.1 0 001.62.94L12.5 21h3l.16-2.72a6.1 6.1 0 001.62-.94l2.39.78 1.5-2.6zm-7.14.56a2.5 2.5 0 112.5-2.5 2.5 2.5 0 01-2.5 2.5z" fill="currentColor" />
          </svg>
        </button>
      </div>
      <!-- Upper Controls -->
      <div class="upper-controls">
        <!-- Start Button -->
        <button id="startBtn"
                type="button"
                class="control-btn"
                data-action="toggle-timer"
                data-state="start"
                aria-label="Start"
                data-tippy-content="Start or pause the timer!">
          <svg class="icon icon-play" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M8 5v14l11-7z" fill="currentColor" />
          </svg>
          <svg class="icon icon-pause" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="currentColor" />
          </svg>
        </button>

        <!-- Pause Button (initially hidden) -->
        <button id="pauseBtn"
                type="button"
                class="control-btn hidden"
                data-action="pause"
                aria-label="Pause"
                data-tippy-content="Pause the timer.">
          <svg class="icon icon-pause" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="currentColor" />
          </svg>
        </button>
  
        <!-- Reset Button -->
        <button id="resetBtn"
                type="button"
                class="control-btn"
                data-action="reset"
                aria-label="Reset"
                data-tippy-content="Reset the timer and session.">
          <svg class="icon icon-reset" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z" fill="currentColor" />
          </svg>
        </button>
      </div>

      <!-- Timer Section -->
      <div class="timer-container" id="timerContainer" tabindex="-1">
        <img src="static/skins/classic.svg" alt="Timer Skin" 
             class="timer-skin" id="timerSkin">
        <div class="timer-display" id="timer">00:00</div>
        <div id="timerLive" class="sr-only" aria-live="polite"></div>
      </div>

      <!-- Lower Controls -->
      <div class="lower-controls">
        <!-- Session Info -->
        <button id="sessionBtn"
                type="button"
                class="control-btn"
                data-action="session"
                aria-label="Session Details"
                data-tippy-content="ToDo: View or edit session details.">
          <svg class="icon icon-session" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z" fill="none" stroke="currentColor" stroke-width="1.5" />
            <path d="M12 7c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5 2.24-5 5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z" fill="currentColor" />
          </svg>
        </button>

        <!-- Log Button -->
        <button id="logBtn"
                type="button"
                class="control-btn"
                data-action="log"
                aria-label="Log Moment"
                data-tippy-content="Log a moment or effect.">
          <svg class="icon icon-log" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" fill="currentColor" />
          </svg>
        </button>

        <!-- High Idea Button -->
        <button id="highIdeaBtn"
                type="button"
                class="control-btn"
                data-action="high-idea"
                aria-label="High Idea"
                data-tippy-content="Record a 'high idea' or insight.">
          <svg class="icon icon-idea" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" fill="currentColor" />
          </svg>
        </button>

        <!-- Distract Me Button -->
        <button id="distractMeBtn"
                type="button"
                class="control-btn"
                data-action="distract"
                aria-label="Distract Me"
                data-tippy-content="DistractMe!">
          <svg class="icon icon-distract" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z" fill="currentColor" />
          </svg>
        </button>
      </div>

    </div>

    <!-- Skin Selector Section -->
    <div id="skinSelector" class="hidden" tabindex="-1" aria-hidden="true">
      <h3>Select Timer Theme</h3>
      <div class="skin-options" role="radiogroup" aria-label="Theme selector" aria-activedescendant="">
        <button class="skin-option active" type="button" role="radio" aria-checked="true" tabindex="0" data-skin="classic" data-name="Classic">
          <img src="static/skins/classic.svg" alt="Classic Theme">
        </button>
        <button class="skin-option" type="button" role="radio" aria-checked="false" tabindex="-1" data-skin="calm" data-name="Calm">
          <img src="static/skins/calm.svg" alt="Calm Theme">
        </button>
        <button class="skin-option" type="button" role="radio" aria-checked="false" tabindex="-1" data-skin="retro" data-name="Retro">
          <img src="static/skins/retro.svg" alt="Retro Theme">
        </button>
        <button class="skin-option" type="button" role="radio" aria-checked="false" tabindex="-1" data-skin="partyvibe" data-name="Party Vibe">
          <img src="static/skins/partyvibe.svg" alt="Party Vibe Theme">
        </button>
      </div>
    </div>

    <!-- Session Banner and Details -->
    <div class="session-banner" id="sessionBanner">
      <p>
        Want to add more details to your session?
        <button id="expandSessionBtn" data-tippy-content="Expand to enter session details.">
          Expand
        </button>
      </p>
    </div>

    <div class="session-details hidden" id="sessionDetails">
      <h3>
        <img src="static/icons/session.svg" alt="" style="width: 24px; height: 24px;">
        Session Details
      </h3>
      <div class="session-form">
        <div class="form-group">
          <label for="productName">Product Name</label>
          <input type="text" id="productName" placeholder="e.g., Blue Dream">
        </div>
        <div class="form-group">
          <label for="consumptionMethod">Consumption Method</label>
          <select id="consumptionMethod">
            <option value="">Select method...</option>
            <option value="Flower" selected>Flower</option>
            <option value="Vape">Vape</option>
            <option value="Edible">Edible</option>
            <option value="Concentrate">Concentrate</option>
            <option value="Tincture">Tincture</option>
            <option value="Topical">Topical</option>
          </select>
        </div>
        <div class="form-group">
          <label for="doseAmount">Dose</label>
          <div class="dose-wrapper">
            <input type="number" id="doseAmount" min="0" step="0.5" value="3">
            <select id="doseUnit">
              <option value="mg">mg</option>
              <option value="g">g</option>
              <option value="ml">ml</option>
              <option value="puffs" selected>puffs</option>
            </select>
          </div>
        </div>
      </div>
      <button id="saveSessionDetailsBtn" data-tippy-content="Save your session details.">
        Save
      </button>
    </div>

    <div class="session-summary hidden" id="sessionSummary"></div>

    <!-- Log Modal -->
    <div id="logModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="logModalTitle">
      <div class="modal-content">
        <button type="button" class="modal-close" aria-label="Close">&times;</button>
        <h2 id="logModalTitle">Log Moment</h2>
        <div class="form-group">
          <label for="momentInput">Enter or select an effect:</label>
          <input type="text" id="momentInput" list="effectsList" 
                 placeholder="Custom moment or scroll down for options">
          <datalist id="effectsList">
            <option value="Mellow Relaxation"></option>
            <option value="Euphoric Giddiness"></option>
            <option value="Creative Spark"></option>
            <option value="Heightened Focus"></option>
            <option value="Mindful Reflection"></option>
            <option value="Sensory Boost"></option>
            <option value="Cozy Couch-Lock"></option>
            <option value="Uplifting Energy"></option>
            <option value="Taste Explorer (Munchies)"></option>
            <option value="Tranquil Sleepiness"></option>
            <option value="Nervous Heart Palpitations"></option>
            <option value="Waves of Panic"></option>
            <option value="Paranoid Thoughts"></option>
            <option value="Indescribable Sparkly Stillness"></option>
          </datalist>
        </div>
        <button id="saveLogMoment">Save</button>
      </div>
    </div>

    <div class="logs hidden">
      <h2>Logged Moments</h2>
      <div id="logList" tabindex="0"></div>
    </div>

    <!-- High Idea Modal -->
    <div id="highIdeaModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="highIdeaModalTitle">
      <div class="modal-content">
        <button type="button" class="modal-close" aria-label="Close">&times;</button>
        <h2 id="highIdeaModalTitle">Document Your High Idea</h2>
        <div class="rich-text-controls">
          <button onclick="formatText('bold')"><b>B</b></button>
          <button onclick="formatText('italic')"><i>I</i></button>
          <button onclick="formatText('underline')"><u>U</u></button>
        </div>
        <div id="richTextEditor" contenteditable="true" class="rich-text-editor"></div>
        <button id="saveHighIdea">Save Idea</button>
      </div>
    </div>

    <!-- Entertainment Modal -->
    <div id="entertainmentModal" class="modal entertainment-modal hidden" role="dialog" aria-modal="true" aria-labelledby="entertainmentModalTitle">
      <div class="modal-content">
        <button type="button" class="modal-close" aria-label="Close">&times;</button>
        <h2 id="entertainmentModalTitle">Entertainment Zone</h2>
        <div class="entertainment-links">
          <a href="https://highdeas.com/" target="_blank" class="entertainment-link">
            <h4>HighDeas</h4>
            <p>Share and explore creative thoughts and ideas from the community.</p>
          </a>
          <a href="https://radio.garden/visit/whitesburg-ky/kDMlR3nu" target="_blank" class="entertainment-link">
            <h4>Radio Garden</h4>
            <p>Explore live radio stations from around the globe on an interactive 3D Earth.</p>
          </a>
          <a href="https://permadi.com/java/spaint/spaint.html#google_vignette" target="_blank" class="entertainment-link">
            <h4>Kaleidoscope Painter</h4>
            <p>Create mesmerizing kaleidoscopic art with this interactive painting tool.</p>
          </a>
        </div>
        <button class="dismiss-btn" id="dismissEntertainment">
          Dismiss Entertainment Zone
        </button>
      </div>
    </div>

    <!-- Share Button -->
    <button id="shareBtn"
            type="button"
            class="control-btn"
            data-action="share"
            aria-label="Share"
            data-tippy-content="Share your session details.">
      <svg class="icon icon-share" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
        <path d="M18 16.08a3 3 0 10-2.82 4 3 3 0 002.82-4zm-8.91-2.38l7.05-4.09a3 3 0 10-.82-1.78l-7.05 4.09a3 3 0 100 3.56l7.05 4.09a3 3 0 10.82-1.78z" fill="currentColor" />
      </svg>
    </button>

    <!-- Share Modal -->
    <div id="shareModalBackdrop" class="modal-backdrop hidden" aria-hidden="true">
      <div id="shareModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="shareModalTitle">
        <div class="modal-content">
          <button type="button" class="modal-close" id="closeShareModal" aria-label="Close">&times;</button>
          <h2 id="shareModalTitle">Share Your Session</h2>

          <!-- Share Options -->
          <div class="share-options">
            <button id="simpleShareBtn" class="share-option active">Simple Share</button>
            <button id="detailedShareBtn" class="share-option">Detailed Share</button>
          </div>

          <!-- Share Custom Message -->
          <div class="form-group">
            <label for="shareMessage">Customize Your Message:</label>
            <textarea id="shareMessage" placeholder="Write a message to share..."></textarea>
          </div>

          <!-- Share Preview -->
          <div id="sharePreview" class="share-preview">
            <!-- This area will dynamically show the share content -->
          </div>
          <div id="shareFeedback" class="status-message" aria-live="polite"></div>

          <!-- Share Actions -->
          <button id="shareTwitter" class="share-btn">Share on Twitter</button>
          <button id="shareFacebook" class="share-btn">Share on Facebook</button>
          <button id="copyLink" class="share-btn">Copy Link</button>
        </div>
      </div>
    </div>
  </div> <!-- End app-container -->
  </main>

  <!-- Ensure your main JS is loaded AFTER Tippy and Popper -->
  <script src="script.js" defer></script>
</body>
</html>
